{% extends "shared/layout.html" %}

{% block title %}
    lexicrypt.login
{% endblock %}

{% block content %}
  {% if session['lex_token'] %}
    <ul id="header">
      <li><a href="{{ url_for('main') }}" class="selected">Your Messages</a></li>
      <li><a href="{{ url_for('encrypt') }}">Encrypt Message</a></li>    
    </ul>
    <div class="inner-wrapper">
      <ul class="your-messages">
        {% for message in messages %}
          <li>
            <img src="{{ message['message'] }}">
            <p>{{ message['decrypted'] }}</p>
            <p class="share"><span>share</span> {{ message['message'] }}</p>
            <form method="post" action="/delete_message">
              <input type="hidden" value="{{ message['message'] }}" name="message">
              <button type="submit" class="delete">x</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    </div>

    <div id="add-email">
      <form method="post" action="/add_email">
        <input type="text" name="message" placeholder="Image Path">
        <input type="text" name="email" placeholder="Accessor's Email">
        <button type="submit">Add email accessor</button>
      </form>
    </div>

    {% if tokens %}
      <ul>
        {% for token in tokens %}
          <li>{{ token }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% else %}
    <div id="authenticate">
      <button type="button" id="login">Log In</button>
      <form method="post" action="/set_email">
        <input type="hidden" name="bid_assertion" value="1">
      </form>
    </div>
  {% endif %}
{% endblock %}